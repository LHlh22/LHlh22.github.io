<!DOCTYPE html><html lang="zn-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>渗透信息收集 | Lh22</title><meta name="description" content="信息收集收集渗透目标的情报是最重要的阶段。如果收集到有用的情报资料的话，可以大大提高对渗透测试的成功性。收集渗透目标的情报一般是对目标系统的分析，扫描探测，服务查点，扫描对方漏洞，查找对方系统IP等，有时候渗透测试者也会用上“社会工程学”。渗透测试者会尽力搜集目标系统的配置与安全防御以及防火墙等等。 信息收集的方法1.主动式收集:主动式收集是通过直接发起与被测目标网络之间的互动来获取相关信息,例如"><meta name="keywords" content="渗透"><meta name="author" content="Lh22,731560818@qq.com"><meta name="copyright" content="Lh22"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="shortcut icon" href="/img/star.jpg"><link rel="canonical" href="http://lhlh22.github.io/2020/11/12/%E6%B8%97%E9%80%8F%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta property="og:type" content="article"><meta property="og:title" content="渗透信息收集"><meta property="og:url" content="http://lhlh22.github.io/2020/11/12/%E6%B8%97%E9%80%8F%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/"><meta property="og:site_name" content="Lh22"><meta property="og:description" content="信息收集收集渗透目标的情报是最重要的阶段。如果收集到有用的情报资料的话，可以大大提高对渗透测试的成功性。收集渗透目标的情报一般是对目标系统的分析，扫描探测，服务查点，扫描对方漏洞，查找对方系统IP等，有时候渗透测试者也会用上“社会工程学”。渗透测试者会尽力搜集目标系统的配置与安全防御以及防火墙等等。 信息收集的方法1.主动式收集:主动式收集是通过直接发起与被测目标网络之间的互动来获取相关信息,例如"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/glassy-sky-lisong/StaticFile/img/6.jpg"><meta property="article:published_time" content="2020-11-12T11:43:35.000Z"><meta property="article:modified_time" content="2020-11-12T11:44:48.480Z"><meta name="twitter:card" content="summary"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><script>var GLOBAL_CONFIG = { 
  root: '/',
  hexoversion: '5.2.0',
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true},
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  bookmark: {
    message_prev: 'Press',
    message_next: 'to bookmark this page'
  },
  runtime: '',
  date_suffix: {"one_hour":"Just","hours":"hours ago","day":"days ago"},
  copyright: undefined,
  ClickShowText: {"text":"happy,every,day,!","fontSize":"15px"},
  medium_zoom: false,
  fancybox: true,
  Snackbar: undefined,
  justifiedGallery: {
    js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
    css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
  },
  baiduPush: false,
  isPhotoFigcaption: false,
  islazyload: false,
  isanchor: true
};

var saveToLocal = {
  set: function setWithExpiry(key, value, ttl) {
    const now = new Date()
    const expiryDay = ttl * 86400000
    const item = {
      value: value,
      expiry: now.getTime() + expiryDay,
    }
    localStorage.setItem(key, JSON.stringify(item))
    },

  get: function getWithExpiry(key) {
    const itemStr = localStorage.getItem(key)

    if (!itemStr) {
      return undefined
    }
    const item = JSON.parse(itemStr)
    const now = new Date()

    if (now.getTime() > item.expiry) {
      localStorage.removeItem(key)
      return undefined
    }
    return item.value
  }
}</script><script id="config_change">var GLOBAL_CONFIG_SITE = { 
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isSidebar: true,
  postUpdate: '2020-11-12 19:44:48'
}</script><noscript><style type="text/css">
#nav {
  opacity: 1
}
.justified-gallery img {
  opacity: 1
}
</style></noscript><script>var activateDarkMode = function () {
  document.documentElement.setAttribute('data-theme', 'dark')
  if (document.querySelector('meta[name="theme-color"]') !== null) {
    document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
  }
}
var activateLightMode = function () {
  document.documentElement.setAttribute('data-theme', 'light')
  if (document.querySelector('meta[name="theme-color"]') !== null) {
    document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
  }
}

var autoChangeMode = 'false'
var t = saveToLocal.get('theme')
if (autoChangeMode === '1') {
  var isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
  var isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
  var isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
  var hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

  if (t === undefined) {
    if (isLightMode) activateLightMode()
    else if (isDarkMode) activateDarkMode()
    else if (isNotSpecified || hasNoSupport) {
      var now = new Date()
      var hour = now.getHours()
      var isNight = hour <= 6 || hour >= 18
      isNight ? activateDarkMode() : activateLightMode()
    }
    window.matchMedia('(prefers-color-scheme: dark)').addListener(function (e) {
      if (saveToLocal.get('theme') === undefined) {
        e.matches ? activateDarkMode() : activateLightMode()
      }
    })
  } else if (t === 'light') activateLightMode()
  else activateDarkMode()
} else if (autoChangeMode === '2') {
  now = new Date()
  hour = now.getHours()
  isNight = hour <= 6 || hour >= 18
  if (t === undefined) isNight ? activateDarkMode() : activateLightMode()
  else if (t === 'light') activateLightMode()
  else activateDarkMode()
} else {
  if (t === 'dark') activateDarkMode()
  else if (t === 'light') activateLightMode()
}</script><link rel="stylesheet" href="/css/background.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@latest/butterfly/css/macWhite.css"><meta name="generator" content="Hexo 5.2.0"></head><body><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="avatar-img" src="/img/star.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="mobile_post_data"><div class="mobile_data_item is-center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">Articles</div><div class="length_num">6</div></a></div></div><div class="mobile_data_item is-center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">Tags</div><div class="length_num">3</div></a></div></div><div class="mobile_data_item is-center">     <div class="mobile_data_link"><a href="/categories/"><div class="headline">Categories</div><div class="length_num">2</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fa fa-heartbeat"></i><span> 清单</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fa fa-music"></i><span> 音乐</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fa fa-film"></i><span> 电影</span></a></li><li><a class="site-page" href="/photos/"><i class="fa-fw fas fa-images"></i><span> 照片</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> 关于</span></a></div><div class="menus_item"><a class="site-page" href="/messageboard/"><i class="fa-fw fa fa-link"></i><span> 留言板</span></a></div></div></div></div><div id="body-wrap"><div id="web_bg" data-type="color"></div><div id="sidebar"><i class="fas fa-arrow-right on" id="toggle-sidebar"></i><div class="sidebar-toc"><div class="sidebar-toc__title">Catalog</div><div class="sidebar-toc__progress"><span class="progress-notice">You've read</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86"><span class="toc-number">1.</span> <span class="toc-text">信息收集</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86%E7%9A%84%E6%96%B9%E6%B3%95"><span class="toc-number">1.1.</span> <span class="toc-text">信息收集的方法</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BD%91%E7%AB%99%E5%8F%8A%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%BF%A1%E6%81%AF"><span class="toc-number">1.2.</span> <span class="toc-text">网站及服务器信息</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9F%9F%E5%90%8D%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86"><span class="toc-number">1.2.1.</span> <span class="toc-text">域名信息收集</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%87%E6%A1%88%E4%BF%A1%E6%81%AF%E6%9F%A5%E8%AF%A2"><span class="toc-number">1.2.2.</span> <span class="toc-text">备案信息查询</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#DNS%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%9F%A5%E8%AF%A2"><span class="toc-number">1.2.3.</span> <span class="toc-text">DNS服务器查询</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9F%A5%E8%AF%A2%E5%9F%9F%E5%90%8D%E6%9C%8D%E5%8A%A1%E5%99%A8"><span class="toc-number">1.2.3.1.</span> <span class="toc-text">查询域名服务器</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9F%9F%E5%90%8D%E6%9E%9A%E4%B8%BE"><span class="toc-number">1.2.4.</span> <span class="toc-text">域名枚举</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%8D%E5%90%91%E5%9C%B0%E5%9D%80%E8%A7%A3%E6%9E%90"><span class="toc-number">1.2.5.</span> <span class="toc-text">反向地址解析</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#dig-%E5%91%BD%E4%BB%A4"><span class="toc-number">1.2.5.1.</span> <span class="toc-text">dig 命令</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%9F%A5%E8%AF%A2%E5%8D%95%E4%B8%AA%E5%9F%9F%E5%90%8D%E7%9A%84-DNS-%E4%BF%A1%E6%81%AF"><span class="toc-number">1.2.5.1.1.</span> <span class="toc-text">查询单个域名的 DNS 信息</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%9F%A5%E8%AF%A2-CNAME-%E7%B1%BB%E5%9E%8B%E7%9A%84%E8%AE%B0%E5%BD%95"><span class="toc-number">1.2.5.1.2.</span> <span class="toc-text">查询 CNAME 类型的记录</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BB%8E%E6%8C%87%E5%AE%9A%E7%9A%84-DNS-%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%8A%E6%9F%A5%E8%AF%A2"><span class="toc-number">1.2.5.1.3.</span> <span class="toc-text">从指定的 DNS 服务器上查询</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%8F%8D%E5%90%91%E6%9F%A5%E8%AF%A2"><span class="toc-number">1.2.5.1.4.</span> <span class="toc-text">反向查询</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%8E%A7%E5%88%B6%E6%98%BE%E7%A4%BA%E7%BB%93%E6%9E%9C"><span class="toc-number">1.2.5.1.5.</span> <span class="toc-text">控制显示结果</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%9F%A5%E7%9C%8B-TTL-Time-to-Live"><span class="toc-number">1.2.5.1.6.</span> <span class="toc-text">查看 TTL(Time to Live)</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%B3%E4%BA%8EDNS%E5%8C%BA%E5%9F%9F%E4%BC%A0%E9%80%81%E6%BC%8F%E6%B4%9E"><span class="toc-number">1.2.6.</span> <span class="toc-text">关于DNS区域传送漏洞</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%80%9A%E8%BF%87%E7%AB%AF%E5%8F%A3%E5%88%A4%E6%96%AD%E6%9C%8D%E5%8A%A1"><span class="toc-number">1.2.7.</span> <span class="toc-text">通过端口判断服务</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8Nmap%E8%BF%9B%E8%A1%8C%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E6%8E%A2%E6%B5%8B"><span class="toc-number">1.2.7.1.</span> <span class="toc-text">使用Nmap进行操作系统探测</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8p0f%E8%BF%9B%E8%A1%8C%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E6%8E%A2%E6%B5%8B"><span class="toc-number">1.2.7.2.</span> <span class="toc-text">使用p0f进行操作系统探测</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AB%99%E7%82%B9%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86"><span class="toc-number">1.2.8.</span> <span class="toc-text">站点信息收集</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#CMS%E6%8C%87%E7%BA%B9%E8%AF%86%E5%88%AB"><span class="toc-number">1.2.8.1.</span> <span class="toc-text">CMS指纹识别</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#WAF%E6%A3%80%E6%B5%8B"><span class="toc-number">1.2.8.2.</span> <span class="toc-text">WAF检测</span></a></li></ol></li></ol></li></ol></li></ol></div></div></div><header class="post-bg" id="page-header" style="background-image: url(https://cdn.jsdelivr.net/gh/glassy-sky-lisong/StaticFile/img/6.jpg)"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">Lh22</a></span><span id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fa fa-heartbeat"></i><span> 清单</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fa fa-music"></i><span> 音乐</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fa fa-film"></i><span> 电影</span></a></li><li><a class="site-page" href="/photos/"><i class="fa-fw fas fa-images"></i><span> 照片</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> 关于</span></a></div><div class="menus_item"><a class="site-page" href="/messageboard/"><i class="fa-fw fa fa-link"></i><span> 留言板</span></a></div></div><span class="close" id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></span></span></nav><div id="post-info"><div id="post-title"><div class="posttitle">渗透信息收集</div></div><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">Created</span><time class="post-meta-date-created" datetime="2020-11-12T11:43:35.000Z" title="Created 2020-11-12 19:43:35">2020-11-12</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2020-11-12T11:44:48.480Z" title="Updated 2020-11-12 19:44:48">2020-11-12</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/web/">web</a></span></div><div class="meta-secondline"> <span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">Word count:</span><span class="word-count">7.5k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">Reading time:</span><span>32min</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">Post View:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout_post" id="content-inner"><article id="post"><div class="post-content" id="article-container"><h1 id="信息收集"><a href="#信息收集" class="headerlink" title="信息收集"></a>信息收集</h1><p>收集渗透目标的情报是最重要的阶段。如果收集到有用的情报资料的话，可以大大提高对渗透测试的成功性。收集渗透目标的情报一般是对目标系统的分析，扫描探测，服务查点，扫描对方漏洞，查找对方系统IP等，有时候渗透测试者也会用上“社会工程学”。渗透测试者会尽力搜集目标系统的配置与安全防御以及防火墙等等。</p>
<h2 id="信息收集的方法"><a href="#信息收集的方法" class="headerlink" title="信息收集的方法"></a>信息收集的方法</h2><p>1.主动式收集:主动式收集是通过直接发起与被测目标网络之间的互动来获取相关信息,例如,ICMP ping或者TCP端口扫描。</p>
<p>2.被动式收集:被动式收集则是通过第三方服务来获取目标网络的相关信息,例如使用谷歌搜索引擎等。</p>
<p>一般来说收集的信息越多越好，通常包括以下几个部分：</p>
<p>域名信息收集</p>
<p>子域名信息收集</p>
<p>站点信息收集</p>
<p>敏感信息收集</p>
<p>服务器信息收集</p>
<p>端口信息收集</p>
<p>真实IP地址识别</p>
<p>社会工程学</p>
<h2 id="网站及服务器信息"><a href="#网站及服务器信息" class="headerlink" title="网站及服务器信息"></a>网站及服务器信息</h2><h3 id="域名信息收集"><a href="#域名信息收集" class="headerlink" title="域名信息收集"></a>域名信息收集</h3><p>whios是个标准的互联网协议,可用于收集网络注册,注册域名,IP地址和自治系统的信息,whios数据库记录有该域名的DNS服务器信息和注册人的联系信息。whois是用来查询域名的IP以及所有者等信息的传输协议。简单说，whois就是一个用来查询域名是否已经被注册，以及注册域名的详细信息的数据库（如域名所有人、域名注册商）。在whois查询中，注册人姓名和邮箱信息，通常对于测试个人站点非常有用，因为我们可以通过搜索引擎，社交网络，挖掘出很多域名所有人的信息。而对于小站点而言，域名所有人往往就是管理员。</p>
<p>==示例==</p>
<p>默认安装的kali中带有whois的客户端,如需查询某一域名的whois信息,可在终端中使用下述whois命令：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br></pre></td><td class="code"><pre><span class="line">root@kali:/home/toor/桌面<span class="comment"># whois baidu.com</span></span><br><span class="line">   Domain Name: BAIDU.COM</span><br><span class="line">   Registry Domain ID: 11181110_DOMAIN_COM-VRSN</span><br><span class="line">   Registrar WHOIS Server: whois.markmonitor.com</span><br><span class="line">   Registrar URL: http://www.markmonitor.com</span><br><span class="line">   Updated Date: 2019-05-09T04:30:46Z</span><br><span class="line">   Creation Date: 1999-10-11T11:05:17Z</span><br><span class="line">   Registry Expiry Date: 2026-10-11T11:05:17Z</span><br><span class="line">   Registrar: MarkMonitor Inc.</span><br><span class="line">   Registrar IANA ID: 292</span><br><span class="line">   Registrar Abuse Contact Email: abusecomplaints@markmonitor.com</span><br><span class="line">   Registrar Abuse Contact Phone: +1.2083895740</span><br><span class="line">   Domain Status: clientDeleteProhibited https://icann.org/epp<span class="comment">#clientDeleteProhibited</span></span><br><span class="line">   Domain Status: clientTransferProhibited https://icann.org/epp<span class="comment">#clientTransferProhibited</span></span><br><span class="line">   Domain Status: clientUpdateProhibited https://icann.org/epp<span class="comment">#clientUpdateProhibited</span></span><br><span class="line">   Domain Status: serverDeleteProhibited https://icann.org/epp<span class="comment">#serverDeleteProhibited</span></span><br><span class="line">   Domain Status: serverTransferProhibited https://icann.org/epp<span class="comment">#serverTransferProhibited</span></span><br><span class="line">   Domain Status: serverUpdateProhibited https://icann.org/epp<span class="comment">#serverUpdateProhibited</span></span><br><span class="line">   Name Server: NS1.BAIDU.COM</span><br><span class="line">   Name Server: NS2.BAIDU.COM</span><br><span class="line">   Name Server: NS3.BAIDU.COM</span><br><span class="line">   Name Server: NS4.BAIDU.COM</span><br><span class="line">   Name Server: NS7.BAIDU.COM</span><br><span class="line">   DNSSEC: unsigned</span><br><span class="line">   URL of the ICANN Whois Inaccuracy Complaint Form: https://www.icann.org/wicf/</span><br><span class="line">&gt;&gt;&gt; Last update of whois database: 2020-11-11T11:00:32Z &lt;&lt;&lt;</span><br><span class="line"></span><br><span class="line">For more information on Whois status codes, please visit https://icann.org/epp</span><br><span class="line"></span><br><span class="line">NOTICE: The expiration date displayed <span class="keyword">in</span> this record is the date the</span><br><span class="line">registrar<span class="string">&#x27;s sponsorship of the domain name registration in the registry is</span></span><br><span class="line"><span class="string">currently set to expire. This date does not necessarily reflect the expiration</span></span><br><span class="line"><span class="string">date of the domain name registrant&#x27;</span>s agreement with the sponsoring</span><br><span class="line">registrar.  Users may consult the sponsoring registrar<span class="string">&#x27;s Whois database to</span></span><br><span class="line"><span class="string">view the registrar&#x27;</span>s reported date of expiration <span class="keyword">for</span> this registration.</span><br><span class="line"></span><br><span class="line">TERMS OF USE: You are not authorized to access or query our Whois</span><br><span class="line">database through the use of electronic processes that are high-volume and</span><br><span class="line">automated except as reasonably necessary to register domain names or</span><br><span class="line">modify existing registrations; the Data <span class="keyword">in</span> VeriSign Global Registry</span><br><span class="line">Services<span class="string">&#x27; (&quot;VeriSign&quot;) Whois database is provided by VeriSign for</span></span><br><span class="line"><span class="string">information purposes only, and to assist persons in obtaining information</span></span><br><span class="line"><span class="string">about or related to a domain name registration record. VeriSign does not</span></span><br><span class="line"><span class="string">guarantee its accuracy. By submitting a Whois query, you agree to abide</span></span><br><span class="line"><span class="string">by the following terms of use: You agree that you may use this Data only</span></span><br><span class="line"><span class="string">for lawful purposes and that under no circumstances will you use this Data</span></span><br><span class="line"><span class="string">to: (1) allow, enable, or otherwise support the transmission of mass</span></span><br><span class="line"><span class="string">unsolicited, commercial advertising or solicitations via e-mail, telephone,</span></span><br><span class="line"><span class="string">or facsimile; or (2) enable high volume, automated, electronic processes</span></span><br><span class="line"><span class="string">that apply to VeriSign (or its computer systems). The compilation,</span></span><br><span class="line"><span class="string">repackaging, dissemination or other use of this Data is expressly</span></span><br><span class="line"><span class="string">prohibited without the prior written consent of VeriSign. You agree not to</span></span><br><span class="line"><span class="string">use electronic processes that are automated and high-volume to access or</span></span><br><span class="line"><span class="string">query the Whois database except as reasonably necessary to register</span></span><br><span class="line"><span class="string">domain names or modify existing registrations. VeriSign reserves the right</span></span><br><span class="line"><span class="string">to restrict your access to the Whois database in its sole discretion to ensure</span></span><br><span class="line"><span class="string">operational stability.  VeriSign may restrict or terminate your access to the</span></span><br><span class="line"><span class="string">Whois database for failure to abide by these terms of use. VeriSign</span></span><br><span class="line"><span class="string">reserves the right to modify these terms at any time.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">The Registry database contains ONLY .COM, .NET, .EDU domains and</span></span><br><span class="line"><span class="string">Registrars.</span></span><br><span class="line"><span class="string">Domain Name: baidu.com</span></span><br><span class="line"><span class="string">Registry Domain ID: 11181110_DOMAIN_COM-VRSN</span></span><br><span class="line"><span class="string">Registrar WHOIS Server: whois.markmonitor.com</span></span><br><span class="line"><span class="string">Registrar URL: http://www.markmonitor.com</span></span><br><span class="line"><span class="string">Updated Date: 2019-05-08T20:59:33-0700</span></span><br><span class="line"><span class="string">Creation Date: 1999-10-11T04:05:17-0700</span></span><br><span class="line"><span class="string">Registrar Registration Expiration Date: 2026-10-11T00:00:00-0700</span></span><br><span class="line"><span class="string">Registrar: MarkMonitor, Inc.</span></span><br><span class="line"><span class="string">Registrar IANA ID: 292</span></span><br><span class="line"><span class="string">Registrar Abuse Contact Email: abusecomplaints@markmonitor.com</span></span><br><span class="line"><span class="string">Registrar Abuse Contact Phone: +1.2083895770</span></span><br><span class="line"><span class="string">Domain Status: clientUpdateProhibited (https://www.icann.org/epp#clientUpdateProhibited)</span></span><br><span class="line"><span class="string">Domain Status: clientTransferProhibited (https://www.icann.org/epp#clientTransferProhibited)</span></span><br><span class="line"><span class="string">Domain Status: clientDeleteProhibited (https://www.icann.org/epp#clientDeleteProhibited)</span></span><br><span class="line"><span class="string">Domain Status: serverUpdateProhibited (https://www.icann.org/epp#serverUpdateProhibited)</span></span><br><span class="line"><span class="string">Domain Status: serverTransferProhibited (https://www.icann.org/epp#serverTransferProhibited)</span></span><br><span class="line"><span class="string">Domain Status: serverDeleteProhibited (https://www.icann.org/epp#serverDeleteProhibited)</span></span><br><span class="line"><span class="string">Registrant Organization: Beijing Baidu Netcom Science Technology Co., Ltd.</span></span><br><span class="line"><span class="string">Registrant State/Province: Beijing</span></span><br><span class="line"><span class="string">Registrant Country: CN</span></span><br><span class="line"><span class="string">Registrant Email: Select Request Email Form at https://domains.markmonitor.com/whois/baidu.com</span></span><br><span class="line"><span class="string">Admin Organization: Beijing Baidu Netcom Science Technology Co., Ltd.</span></span><br><span class="line"><span class="string">Admin State/Province: Beijing</span></span><br><span class="line"><span class="string">Admin Country: CN</span></span><br><span class="line"><span class="string">Admin Email: Select Request Email Form at https://domains.markmonitor.com/whois/baidu.com</span></span><br><span class="line"><span class="string">Tech Organization: Beijing Baidu Netcom Science Technology Co., Ltd.</span></span><br><span class="line"><span class="string">Tech State/Province: Beijing</span></span><br><span class="line"><span class="string">Tech Country: CN</span></span><br><span class="line"><span class="string">Tech Email: Select Request Email Form at https://domains.markmonitor.com/whois/baidu.com</span></span><br><span class="line"><span class="string">Name Server: ns1.baidu.com</span></span><br><span class="line"><span class="string">Name Server: ns7.baidu.com</span></span><br><span class="line"><span class="string">Name Server: ns3.baidu.com</span></span><br><span class="line"><span class="string">Name Server: ns2.baidu.com</span></span><br><span class="line"><span class="string">Name Server: ns4.baidu.com</span></span><br><span class="line"><span class="string">DNSSEC: unsigned</span></span><br><span class="line"><span class="string">URL of the ICANN WHOIS Data Problem Reporting System: http://wdprs.internic.net/</span></span><br><span class="line"><span class="string">&gt;&gt;&gt; Last update of WHOIS database: 2020-11-11T02:55:07-0800 &lt;&lt;&lt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">For more information on WHOIS status codes, please visit:</span></span><br><span class="line"><span class="string">  https://www.icann.org/resources/pages/epp-status-codes</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">If you wish to contact this domain’s Registrant, Administrative, or Technical</span></span><br><span class="line"><span class="string">contact, and such email address is not visible above, you may do so via our web</span></span><br><span class="line"><span class="string">form, pursuant to ICANN’s Temporary Specification. To verify that you are not a</span></span><br><span class="line"><span class="string">robot, please enter your email address to receive a link to a page that</span></span><br><span class="line"><span class="string">facilitates email communication with the relevant contact(s).</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Web-based WHOIS:</span></span><br><span class="line"><span class="string">  https://domains.markmonitor.com/whois</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">If you have a legitimate interest in viewing the non-public WHOIS details, send</span></span><br><span class="line"><span class="string">your request and the reasons for your request to whoisrequest@markmonitor.com</span></span><br><span class="line"><span class="string">and specify the domain name in the subject line. We will review that request and</span></span><br><span class="line"><span class="string">may ask for supporting documentation and explanation.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">The data in MarkMonitor’s WHOIS database is provided for information purposes,</span></span><br><span class="line"><span class="string">and to assist persons in obtaining information about or related to a domain</span></span><br><span class="line"><span class="string">name’s registration record. While MarkMonitor believes the data to be accurate,</span></span><br><span class="line"><span class="string">the data is provided &quot;as is&quot; with no guarantee or warranties regarding its</span></span><br><span class="line"><span class="string">accuracy.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">By submitting a WHOIS query, you agree that you will use this data only for</span></span><br><span class="line"><span class="string">lawful purposes and that, under no circumstances will you use this data to:</span></span><br><span class="line"><span class="string">  (1) allow, enable, or otherwise support the transmission by email, telephone,</span></span><br><span class="line"><span class="string">or facsimile of mass, unsolicited, commercial advertising, or spam; or</span></span><br><span class="line"><span class="string">  (2) enable high volume, automated, or electronic processes that send queries,</span></span><br><span class="line"><span class="string">data, or email to MarkMonitor (or its systems) or the domain name contacts (or</span></span><br><span class="line"><span class="string">its systems).</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">MarkMonitor reserves the right to modify these terms at any time.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">By submitting this query, you agree to abide by this policy.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">MarkMonitor Domain Management(TM)</span></span><br><span class="line"><span class="string">Protecting companies and consumers in a digital world.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Visit MarkMonitor at https://www.markmonitor.com</span></span><br><span class="line"><span class="string">Contact us at +1.8007459229</span></span><br><span class="line"><span class="string">In Europe, at +44.02032062220</span></span><br><span class="line"><span class="string">--</span></span><br><span class="line"><span class="string">root@kali:/home/toor/桌面# </span></span><br></pre></td></tr></table></figure>
<p>可以从这返回的结果中获取DNS服务器的信息以及域名的注册人的联系方式,这些信息会在渗透测试的后续阶段发挥作用,当然也可以通过一些在线的工具进行查询:</p>
<p>站长之家: <a target="_blank" rel="noopener" href="http://whois.chinaz.com/">http://whois.chinaz.com/</a></p>
<p>全球WHOIS查询:<a target="_blank" rel="noopener" href="https://www.whois365.com/cn/">https://www.whois365.com/cn/</a></p>
<p>爱站:<a target="_blank" rel="noopener" href="http://www.aizhan.com/">http://www.aizhan.com/</a></p>
<p>阿里云:<a target="_blank" rel="noopener" href="https://whois.aliyun.com/whois/domain/">https://whois.aliyun.com/whois/domain/</a></p>
<p>Whois站长之家查询：<a target="_blank" rel="noopener" href="http://whois.chinaz.com/">http://whois.chinaz.com/</a></p>
<p>阿里云中国万网查询：<a target="_blank" rel="noopener" href="https://whois.aliyun.com/">https://whois.aliyun.com/</a></p>
<p>Whois Lookup 查找目标网站所有者的信息：<a target="_blank" rel="noopener" href="http://whois.domaintools.com/">http://whois.domaintools.com/</a></p>
<p>Netcraft Site Report 显示目标网站上使用的技术：<a target="_blank" rel="noopener" href="http://toolbar.netcraft.com/site_report?url=">http://toolbar.netcraft.com/site_report?url=</a></p>
<p>Robtex DNS 查询显示关于目标网站的全面的DNS信息：<a target="_blank" rel="noopener" href="https://www.robtex.com/">https://www.robtex.com/</a></p>
<p>全球Whois查询：<a target="_blank" rel="noopener" href="https://www.whois365.com/cn/">https://www.whois365.com/cn/</a></p>
<p>站长工具爱站查询：<a target="_blank" rel="noopener" href="https://whois.aizhan.com/">https://whois.aizhan.com/</a></p>
<h3 id="备案信息查询"><a href="#备案信息查询" class="headerlink" title="备案信息查询"></a>备案信息查询</h3><p>网站备案信息是根据国家法律法规规定，由网站所有者向国家有关部门申请的备案，是国家信息产业部对网站的一种管理途径，是为了防止在网上从事非法网站经营活动，当然主要是针对国内网站。</p>
<p>在备案查询中我们主要关注的是：单位信息例如名称、备案编号、网站负责人、法人、电子邮箱、联系电话等。</p>
<p>常用的备案信息查询网站有以下几个：</p>
<p>ICP/IP地址/域名信息备案管理系统：<a target="_blank" rel="noopener" href="http://beian.miit.gov.cn/publish/query/indexFirst.action">http://beian.miit.gov.cn/publish/query/indexFirst.action</a></p>
<p>ICP备案查询网：<a target="_blank" rel="noopener" href="http://www.beianbeian.com/">http://www.beianbeian.com/</a></p>
<p>备案吧吧：<a target="_blank" rel="noopener" href="https://www.beian88.com/">https://www.beian88.com/</a></p>
<p>天眼查：<a target="_blank" rel="noopener" href="https://www.tianyancha.com/">https://www.tianyancha.com/</a></p>
<h3 id="DNS服务器查询"><a href="#DNS服务器查询" class="headerlink" title="DNS服务器查询"></a>DNS服务器查询</h3><p>通过host命令来查询dns服务器</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">host 命令</span><br><span class="line"></span><br><span class="line">-a：显示详细的DNS信息；</span><br><span class="line">-c&lt;类型&gt;：指定查询类型，默认值为“IN“；</span><br><span class="line">-C：查询指定主机的完整的SOA记录；</span><br><span class="line">-r：在查询域名时，不使用递归的查询方式；</span><br><span class="line">-t&lt;类型&gt;：指定查询的域名信息类型；</span><br><span class="line">-v：显示指令执行的详细信息；</span><br><span class="line">-w：如果域名服务器没有给出应答信息，则总是等待，直到域名服务器给出应答；</span><br><span class="line">-W&lt;时间&gt;：指定域名查询的最长时间，如果在指定时间内域名服务器没有给出应答信息，则退出指令；</span><br><span class="line">-4：使用IPv4；</span><br><span class="line">-6：使用IPv6.</span><br><span class="line"></span><br><span class="line">hostname [server]</span><br></pre></td></tr></table></figure>
<h4 id="查询域名服务器"><a href="#查询域名服务器" class="headerlink" title="查询域名服务器"></a>查询域名服务器</h4><p>==示例==</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">root@kali:/home/toor/桌面<span class="comment"># host -t ns hdu.edu.cn</span></span><br><span class="line">hdu.edu.cn name server dns1.hdu.edu.cn.</span><br><span class="line">hdu.edu.cn name server dns2.hdu.edu.cn.</span><br><span class="line">hdu.edu.cn name server dns3.hdu.edu.cn.</span><br><span class="line">可以看到有3个dns服务器</span><br><span class="line">[root@localhost ~]<span class="comment"># host www.linuxde.net   </span></span><br><span class="line">www.linuxde.net is an <span class="built_in">alias</span> <span class="keyword">for</span> host.1.linuxde.net.</span><br><span class="line">host.1.linuxde.net has address 100.42.212.8</span><br></pre></td></tr></table></figure>
<p>DNS记录类型=&gt;在买了域名后IDC的那个后台里，添加解析记录的地方就能看到</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">A记录: A (Address)记录是用来指定主机名(或域名)对应的IP地址记录。户可以将该域名下的网站服务器指向到</span><br><span class="line">NS记录: NS (NameServer)记录是域名服务器记录，用来指定该域名由哪个DNS服务器来进行解析。</span><br><span class="line">MX记录: MX (MailExchanger)记录是邮件交换记录</span><br><span class="line">CNAME记录: CNAME (Canonical Name )别名记录</span><br><span class="line">TXT录: - 般指某个主机名或域名的说明</span><br><span class="line">TTL值: TTL (Time-To-Live)原理:TTL是IP协议包中的一个值</span><br><span class="line">PTR值: PTR是pointer的简写，将一个IP地址映射到对应的域名,也被称为指针记录，PTR记录是A记录的逆向记录，作用是把IP地址解析为域名。</span><br><span class="line">SRV记录：SRV记录是服务器资源记录的缩写</span><br></pre></td></tr></table></figure>
<p>==示例==</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">root@kali:/home/toor/桌面<span class="comment"># host -t a hdu.edu.cn</span></span><br><span class="line">hdu.edu.cn has address 218.75.123.169</span><br><span class="line">root@kali:/home/toor/桌面<span class="comment"># host -t a ctf.hnp.edu.cn</span></span><br><span class="line">ctf.hnp.edu.cn has address 183.169.148.18</span><br></pre></td></tr></table></figure>

<h3 id="域名枚举"><a href="#域名枚举" class="headerlink" title="域名枚举"></a>域名枚举</h3><p>在得到主域名信息之后，如果能通过主域名得到所有子域名信息，再通过子域名查询其对应的主机IP，这样我们能得到一个较为完整的信息。</p>
<p>使用fierse工具，可以进行域名列表查询：fierce -dns domainName<br>==示例==</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">root@kali:/home/toor/桌面<span class="comment"># fierce -dns hdu.edu.cn</span></span><br><span class="line">DNS Servers <span class="keyword">for</span> hdu.edu.cn:</span><br><span class="line">        dns2.hdu.edu.cn</span><br><span class="line">        dns3.hdu.edu.cn</span><br><span class="line">        dns1.hdu.edu.cn</span><br><span class="line"></span><br><span class="line">Trying zone transfer first...</span><br><span class="line">        Testing dns2.hdu.edu.cn</span><br><span class="line">                Request timed out or transfer not allowed.</span><br><span class="line">        Testing dns3.hdu.edu.cn</span><br><span class="line">                Request timed out or transfer not allowed.</span><br><span class="line">        Testing dns1.hdu.edu.cn</span><br><span class="line">                Request timed out or transfer not allowed.</span><br><span class="line"></span><br><span class="line">Unsuccessful <span class="keyword">in</span> zone transfer (it was worth a shot)</span><br><span class="line">Okay, trying the good old fashioned way... brute force</span><br><span class="line"></span><br><span class="line">Checking <span class="keyword">for</span> wildcard DNS...</span><br><span class="line">Nope. Good.</span><br><span class="line">Now performing 2280 <span class="built_in">test</span>(s)...</span><br><span class="line">210.32.32.182   accounting.hdu.edu.cn</span><br><span class="line">210.32.32.181   accounting.hdu.edu.cn</span><br><span class="line">210.32.32.182   ai.hdu.edu.cn</span><br><span class="line">210.32.32.181   ai.hdu.edu.cn</span><br><span class="line">192.168.100.56  app1.hdu.edu.cn</span><br><span class="line">192.168.2.253   auth.hdu.edu.cn</span><br><span class="line">210.32.32.181   auto.hdu.edu.cn</span><br><span class="line">210.32.32.182   auto.hdu.edu.cn</span><br><span class="line">210.32.32.182   bbs.hdu.edu.cn</span><br><span class="line">210.32.32.181   bbs.hdu.edu.cn</span><br><span class="line">210.32.32.182   cg.hdu.edu.cn</span><br><span class="line">210.32.32.181   cg.hdu.edu.cn</span><br><span class="line">192.168.101.142 chat.hdu.edu.cn</span><br><span class="line">210.32.32.182   cms.hdu.edu.cn</span><br></pre></td></tr></table></figure>
<p>除fierse之外，dnsdict6、dnsenum、dnsmap都可以进行域名枚举</p>
<h3 id="反向地址解析"><a href="#反向地址解析" class="headerlink" title="反向地址解析"></a>反向地址解析</h3><p>我们经常使用到得DNS服务器里面有两个区域，即“正向查找区域”和“反向查找区域”，正向查找区域就是我们通常所说的域名解析，反向查找区域即是这里所说的IP反向解析，它的作用就是通过查询IP地址的PTR记录来得到该IP地址指向的域名.</p>
<p>由于在域名系统中，一个IP地址可以对应多个域名，因此从IP出发去找域名，理论上应该遍历整个域名树，但这在Internet上是不现实的。为了完成逆向域名解析，系统提供一个特别域，该特别域称为逆向解析域in-addr.arpa。这样欲解析的IP地址就会被表达成一种像域名一样的可显示串形式，后缀以逆向解析域域名”in-addr.arpa”结尾。例如一个IP地址：222.211.233.244，其逆向域名表达方式为：244.233.221.222.in-addr.arpa</p>
<p>dig:使用dig进行反向解析的命令格式为：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dig -x ip @dnsserver <span class="comment">#用 dig 查看反向解析</span></span><br></pre></td></tr></table></figure>
<p>注：WWW2是万维网中分流服务器的子域名，主要用于识别一个域名内一些相关的网站。<a target="_blank" rel="noopener" href="http://www.example.org、www2.example.org及www3.example.org就是其中的例子.这些子域名可以延续至www3、www4、www5、www6等,如此类推.一般来说,使用这些域名是为了服务器负载均衡.有时候,即使在浏览网站镜像,这些特别的域名会被隐藏,显示出来的仍是“www”/">www.example.org、www2.example.org及www3.example.org就是其中的例子。这些子域名可以延续至WWW3、WWW4、WWW5、WWW6等，如此类推。一般来说，使用这些域名是为了服务器负载均衡。有时候，即使在浏览网站镜像，这些特别的域名会被隐藏，显示出来的仍是“WWW”</a></p>
<p>==示例==</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">root@kali:/home/toor/桌面<span class="comment"># host -t a www2.hdu.edu.cn</span></span><br><span class="line">www2.hdu.edu.cn is an <span class="built_in">alias</span> <span class="keyword">for</span> www2.split.hdu.edu.cn.</span><br><span class="line">www2.split.hdu.edu.cn has address 218.75.123.181</span><br><span class="line">www2.split.hdu.edu.cn has address 218.75.123.182</span><br><span class="line">root@kali:/home/toor/桌面<span class="comment"># dig -x 218.75.123.181 @dns1.hdu.edu.cn</span></span><br><span class="line"></span><br><span class="line">; &lt;&lt;&gt;&gt; DiG 9.11.14-3-Debian &lt;&lt;&gt;&gt; -x 218.75.123.181 @dns1.hdu.edu.cn</span><br><span class="line">;; global options: +cmd</span><br><span class="line">;; Got answer:</span><br><span class="line">;; -&gt;&gt;HEADER&lt;&lt;- opcode: QUERY, status: REFUSED, id: 49625</span><br><span class="line">;; flags: qr rd; QUERY: 1, ANSWER: 0, AUTHORITY: 0, ADDITIONAL: 1</span><br><span class="line">;; WARNING: recursion requested but not available</span><br><span class="line"></span><br><span class="line">;; OPT PSEUDOSECTION:</span><br><span class="line">; EDNS: version: 0, flags:; udp: 4096</span><br><span class="line">;; QUESTION SECTION:</span><br><span class="line">;181.123.75.218.in-addr.arpa.   IN      PTR</span><br><span class="line"></span><br><span class="line">;; Query time: 35 msec</span><br><span class="line">;; SERVER: 210.32.32.1<span class="comment">#53(210.32.32.1)</span></span><br><span class="line">;; WHEN: 三 11月 11 19:36:19 CST 2020</span><br><span class="line">;; MSG SIZE  rcvd: 56</span><br></pre></td></tr></table></figure>
<h4 id="dig-命令"><a href="#dig-命令" class="headerlink" title="dig 命令"></a>dig 命令</h4><h5 id="查询单个域名的-DNS-信息"><a href="#查询单个域名的-DNS-信息" class="headerlink" title="查询单个域名的 DNS 信息"></a>查询单个域名的 DNS 信息</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">root@kali:/home/toor/桌面<span class="comment"># dig baidu.com</span></span><br><span class="line"></span><br><span class="line">; &lt;&lt;&gt;&gt; DiG 9.11.14-3-Debian &lt;&lt;&gt;&gt; baidu.com</span><br><span class="line">;; global options: +cmd</span><br><span class="line">;; Got answer:</span><br><span class="line">;; -&gt;&gt;HEADER&lt;&lt;- opcode: QUERY, status: NOERROR, id: 17680</span><br><span class="line">;; flags: qr rd ra; QUERY: 1, ANSWER: 2, AUTHORITY: 0, ADDITIONAL: 0</span><br><span class="line"></span><br><span class="line">;; QUESTION SECTION:</span><br><span class="line">;baidu.com.                     IN      A</span><br><span class="line"></span><br><span class="line">;; ANSWER SECTION:</span><br><span class="line">baidu.com.              5       IN      A       39.156.69.79</span><br><span class="line">baidu.com.              5       IN      A       220.181.38.148</span><br><span class="line"></span><br><span class="line">;; Query time: 5 msec</span><br><span class="line">;; SERVER: 192.168.160.2<span class="comment">#53(192.168.160.2)</span></span><br><span class="line">;; WHEN: 三 11月 11 20:21:58 CST 2020</span><br><span class="line">;; MSG SIZE  rcvd: 59</span><br><span class="line"></span><br><span class="line">dig 命令默认的输出信息比较丰富，大概可以分为 5 个部分。</span><br><span class="line">第一部分显示 dig 命令的版本和输入的参数。</span><br><span class="line">第二部分显示服务返回的一些技术详情，比较重要的是 status。如果 status 的值为 NOERROR 则说明本次查询成功结束。</span><br><span class="line">第三部分中的 <span class="string">&quot;QUESTION SECTION&quot;</span> 显示我们要查询的域名。</span><br><span class="line">第四部分的 <span class="string">&quot;ANSWER SECTION&quot;</span> 是查询到的结果。</span><br><span class="line">第五部分则是本次查询的一些统计信息，比如用了多长时间，查询了哪个 DNS 服务器，在什么时间进行的查询等等。</span><br><span class="line"></span><br><span class="line">默认情况下 dig 命令查询 A 记录，上图中显示的 A 即说明查询的记录类型为 A 记录。在尝试查询其它类型的记录前让我们先来了解一下常见的 DNS 记录类型。</span><br><span class="line"></span><br><span class="line">status: NOERROR表示查询成功</span><br><span class="line">而NXDOMAIN是DNS解析器（即客户端）在解析域名的请求发送到DNS且无法解析为IP地址时收到的DNS消息类型。NXDOMAIN错误消息表示该域不存在。</span><br></pre></td></tr></table></figure>
<h5 id="查询-CNAME-类型的记录"><a href="#查询-CNAME-类型的记录" class="headerlink" title="查询 CNAME 类型的记录"></a>查询 CNAME 类型的记录</h5><p>除了 A 记录，常见的 DNS 记录还有 CNAME，我们可以在查询时指定要查询的 DNS 记录类型：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">root@kali:/home/toor/桌面<span class="comment"># dig abc.filterinto.com CNAME</span></span><br><span class="line"></span><br><span class="line">; &lt;&lt;&gt;&gt; DiG 9.11.14-3-Debian &lt;&lt;&gt;&gt; abc.filterinto.com CNAME</span><br><span class="line">;; global options: +cmd</span><br><span class="line">;; Got answer:</span><br><span class="line">;; -&gt;&gt;HEADER&lt;&lt;- opcode: QUERY, status: NOERROR, id: 52381</span><br><span class="line">;; flags: qr rd ra; QUERY: 1, ANSWER: 0, AUTHORITY: 1, ADDITIONAL: 0</span><br><span class="line"></span><br><span class="line">;; QUESTION SECTION:</span><br><span class="line">;abc.filterinto.com.            IN      CNAME</span><br><span class="line"></span><br><span class="line">;; AUTHORITY SECTION:</span><br><span class="line">filterinto.com.         5       IN      SOA     jm1.dns.com. admin.dns.com. 1579140945 7200 3600 1209600 1800</span><br><span class="line"></span><br><span class="line">;; Query time: 388 msec</span><br><span class="line">;; SERVER: 192.168.160.2<span class="comment">#53(192.168.160.2)</span></span><br><span class="line">;; WHEN: 三 11月 11 20:23:29 CST 2020</span><br><span class="line">;; MSG SIZE  rcvd: 86</span><br></pre></td></tr></table></figure>
<h5 id="从指定的-DNS-服务器上查询"><a href="#从指定的-DNS-服务器上查询" class="headerlink" title="从指定的 DNS 服务器上查询"></a>从指定的 DNS 服务器上查询</h5><p>由于一些原因，希望从指定的 DNS 服务器上进行查询(从默认的 DNS 服务器上获得的结果可能不准确)。指定 DNS 服务器的方式为使用 @ 符号：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">$ dig @8.8.8.8 abc.filterinto.com</span><br><span class="line"></span><br><span class="line">root@kali:/home/toor/桌面<span class="comment"># dig @8.8.8.8 abc.filterinto.com</span></span><br><span class="line"></span><br><span class="line">; &lt;&lt;&gt;&gt; DiG 9.11.14-3-Debian &lt;&lt;&gt;&gt; @8.8.8.8 abc.filterinto.com</span><br><span class="line">; (1 server found)</span><br><span class="line">;; global options: +cmd</span><br><span class="line">;; Got answer:</span><br><span class="line">;; -&gt;&gt;HEADER&lt;&lt;- opcode: QUERY, status: NOERROR, id: 2190</span><br><span class="line">;; flags: qr rd ra; QUERY: 1, ANSWER: 0, AUTHORITY: 1, ADDITIONAL: 0</span><br><span class="line"></span><br><span class="line">;; QUESTION SECTION:</span><br><span class="line">;abc.filterinto.com.            IN      A</span><br><span class="line"></span><br><span class="line">;; AUTHORITY SECTION:</span><br><span class="line">filterinto.com.         600     IN      SOA     jm1.dns.com. admin.dns.com. 1579140945 7200 3600 1209600 1800</span><br><span class="line"></span><br><span class="line">;; Query time: 60 msec</span><br><span class="line">;; SERVER: 8.8.8.8<span class="comment">#53(8.8.8.8)</span></span><br><span class="line">;; WHEN: 三 11月 11 20:26:18 CST 2020</span><br><span class="line">;; MSG SIZE  rcvd: 86</span><br></pre></td></tr></table></figure>
<p>从上图可以看到本次查询的 DNS 服务器为 8.8.8.8。<br>如果不指定 DNS 服务器，dig 会依次使用 /etc/resolv.conf 里的地址作为 DNS 服务器</p>
<h5 id="反向查询"><a href="#反向查询" class="headerlink" title="反向查询"></a>反向查询</h5><p>在前面的查询中我们指定了查询服务器为 8.8.8.8，这是谁家的 DNS 服务器？其实我们可以使用 dig 的 -x 选项来反向解析 IP 地址对应的域名：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">root@kali:/home/toor/桌面<span class="comment"># dig -x 8.8.8.8 +short</span></span><br><span class="line">dns.google.</span><br></pre></td></tr></table></figure>
<h5 id="控制显示结果"><a href="#控制显示结果" class="headerlink" title="控制显示结果"></a>控制显示结果</h5><p>dig 命令默认返回的结果展示详细的信息，如果要获得精简的结果可以使用 +short 选项：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">root@kali:/home/toor/桌面<span class="comment"># dig +short www.baidu.com</span></span><br><span class="line">www.a.shifen.com.</span><br><span class="line">61.135.169.121</span><br><span class="line">61.135.185.32</span><br><span class="line"></span><br><span class="line">因为使用了+short参数，所以读者朋友需要注意结果中都代表了什么：</span><br><span class="line"></span><br><span class="line">1) 第1行是MX记录</span><br><span class="line"></span><br><span class="line">2) 第2行是TXT记录</span><br><span class="line"></span><br><span class="line">3) 第3行是SOA记录</span><br><span class="line"></span><br><span class="line">4) 第4到9行是NS记录</span><br><span class="line"></span><br><span class="line">5) 第10到11行是A记录</span><br><span class="line"></span><br><span class="line">这下显示的结果就清爽多了。</span><br><span class="line">其实我们还可以通过更多选项来控制输出的内容，比如只想显示 <span class="string">&quot;ANSWER SECTION&quot;</span> 的内容：</span><br><span class="line"></span><br><span class="line">$ dig abc.filterinto.com +nocomments +noquestion +noauthority +noadditional +nostats</span><br><span class="line"></span><br><span class="line">这个结果很不错，就是使用的选项太多了(dig 命令有很多这样的选项，详情请参考使用手册)。我们可以换一种优雅一些的方式来实现和上面相同的结果：</span><br><span class="line"></span><br><span class="line">$ dig abc.filterinto.com +noall +answer</span><br></pre></td></tr></table></figure>
<h5 id="查看-TTL-Time-to-Live"><a href="#查看-TTL-Time-to-Live" class="headerlink" title="查看 TTL(Time to Live)"></a>查看 TTL(Time to Live)</h5><p>TTL 是 DNS 解析中很重要的指标，主要是控制 DNS 记录在 DNS 服务器上的缓存时间：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">dig baidu.com</span><br><span class="line"></span><br><span class="line">root@kali:/home/toor/桌面<span class="comment"># dig baidu.com</span></span><br><span class="line"></span><br><span class="line">; &lt;&lt;&gt;&gt; DiG 9.11.14-3-Debian &lt;&lt;&gt;&gt; baidu.com</span><br><span class="line">;; global options: +cmd</span><br><span class="line">;; Got answer:</span><br><span class="line">;; -&gt;&gt;HEADER&lt;&lt;- opcode: QUERY, status: NOERROR, id: 23733</span><br><span class="line">;; flags: qr rd ra; QUERY: 1, ANSWER: 2, AUTHORITY: 5, ADDITIONAL: 5</span><br><span class="line"></span><br><span class="line">;; QUESTION SECTION:</span><br><span class="line">;baidu.com.                     IN      A</span><br><span class="line"></span><br><span class="line">;; ANSWER SECTION:</span><br><span class="line">baidu.com.              5       IN      A       39.156.69.79</span><br><span class="line">baidu.com.              5       IN      A       220.181.38.148</span><br><span class="line"></span><br><span class="line">;; AUTHORITY SECTION:</span><br><span class="line">baidu.com.              5       IN      NS      ns3.baidu.com.</span><br><span class="line">baidu.com.              5       IN      NS      ns4.baidu.com.</span><br><span class="line">baidu.com.              5       IN      NS      ns7.baidu.com.</span><br><span class="line">baidu.com.              5       IN      NS      dns.baidu.com.</span><br><span class="line">baidu.com.              5       IN      NS      ns2.baidu.com.</span><br><span class="line"></span><br><span class="line">;; ADDITIONAL SECTION:</span><br><span class="line">ns7.baidu.com.          5       IN      A       180.76.76.92</span><br><span class="line">ns2.baidu.com.          5       IN      A       220.181.33.31</span><br><span class="line">dns.baidu.com.          5       IN      A       202.108.22.220</span><br><span class="line">ns4.baidu.com.          5       IN      A       14.215.178.80</span><br><span class="line">ns3.baidu.com.          5       IN      A       112.80.248.64</span><br><span class="line"></span><br><span class="line">;; Query time: 7 msec</span><br><span class="line">;; SERVER: 192.168.160.2<span class="comment">#53(192.168.160.2)</span></span><br><span class="line">;; WHEN: 三 11月 11 20:37:18 CST 2020</span><br><span class="line">;; MSG SIZE  rcvd: 229</span><br><span class="line"></span><br><span class="line">5为缓存时间</span><br><span class="line">查询结果中的单位是秒。通过下面的命令可以显示精简一些测结果：</span><br><span class="line">dig +nocmd +noall +answer +ttlid baidu.com</span><br></pre></td></tr></table></figure>

<p>在线查询也是一种办法  <a target="_blank" rel="noopener" href="http://dns.aizhan.com/">http://dns.aizhan.com/</a><br>想要获得完整的信息，可以多尝试不同的工具，整合结果。很多工具无法做反向查询的原因，在于域名所有者没有添加反向解析记录。</p>
<h3 id="关于DNS区域传送漏洞"><a href="#关于DNS区域传送漏洞" class="headerlink" title="关于DNS区域传送漏洞"></a>关于DNS区域传送漏洞</h3><p>区域传送操作指的是一台后备服务器使用来自主服务器的数据刷新自己的zone数据库。一般来说，DNS区域传送操作只在网络里真的有后备域名DNS服务器时才有必要执行，但许多DNS服务器却被错误地配置成只要有人发出请求，就会向对方提供一个zone数据库的拷贝。当一个单位没有使用公用/私用DNS机制来分割外部公用DNS信息和内部私用DNS信息的时候，此时内部主机名和IP地址都暴露给了攻击者。就像是把一个单位的内部网络完整蓝图或导航图奉送给了别人。</p>
<p>使用nmap扫描器和dig来得到DNS Zone Transfer记录。</p>
<p>使用nmap扫描器附带的脚本，可以扫描DNS服务器是否存在域传送漏洞。语法为：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">nmap --script dns-zone-transfer --script-args dns-zone-trans</span><br><span class="line">fer.domain=nwpu.edu.cn -p 53 -Pn dns.nwpu.edu.cn</span><br></pre></td></tr></table></figure>
<p>对上述命令命令说明如下：</p>
<p>nmap –script dns-zone-transfer表示加载nmap文件夹下的脚本文件dns-zone-transfer.nse，扩展名.nse可省略</p>
<p>–script-args dns-zone-transfer.domain=zonetransfer.me向脚本传递参数，设置列出记录的域是nwpu.edu.cn</p>
<p>-p 53设置扫描53端口</p>
<p>-Pn设置通过Ping发现主机是否存活</p>
<h3 id="通过端口判断服务"><a href="#通过端口判断服务" class="headerlink" title="通过端口判断服务"></a>通过端口判断服务</h3><p>nmap</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br></pre></td><td class="code"><pre><span class="line">1.用主机名和IP地址扫描系统</span><br><span class="line">主机名</span><br><span class="line"></span><br><span class="line">nmap server2.tecmint.com</span><br><span class="line">IP</span><br><span class="line"></span><br><span class="line">nmap 192.168.0.101</span><br><span class="line">2.扫描使用“-v”选项</span><br><span class="line">你可以看到下面的命令使用“ -v “选项后给出了远程机器更详细的信息。</span><br><span class="line"></span><br><span class="line">nmap -v server2.tecmint.com</span><br><span class="line">3.扫描多台主机</span><br><span class="line">在Nmap命令后加上多个IP地址或主机名来扫描多台主机。</span><br><span class="line"></span><br><span class="line">nmap 192.168.0.101 192.168.0.102 192.168.0.103 </span><br><span class="line">4.扫描整个子网</span><br><span class="line">可以使用*通配符来扫描整个子网或某个范围的IP地址</span><br><span class="line"></span><br><span class="line">nmap 192.168.0.*</span><br><span class="line">5.使用IP地址的最后一个字节扫描多台服务器</span><br><span class="line">指定IP地址的最后一个字节来对多个IP地址进行扫描。例如，我在下面执行中扫描了IP地址192.168.0.101，192.168.0.102和192.168.0.103。</span><br><span class="line"></span><br><span class="line">nmap 192.168.0.101,102,103 </span><br><span class="line">6.从一个文件中扫描主机列表</span><br><span class="line">如果你有多台主机需要扫描且所有主机信息都写在一个文件中，那么你可以直接让nmap读取该文件来执行扫描，让我们来看看如何做到这一点。</span><br><span class="line">创建一个名为“nmaptest.txt ”的文本文件，并定义所有你想要扫描的服务器IP地址或主机名。</span><br><span class="line"></span><br><span class="line"> cat &gt; nmaptest.txt </span><br><span class="line">localhost</span><br><span class="line">server2.tecmint.com</span><br><span class="line">192.168.0.101</span><br><span class="line">接下来运行带“iL” 选项的nmap命令来扫描文件中列出的所有IP地址</span><br><span class="line"></span><br><span class="line">nmap -iL nmaptest.txt </span><br><span class="line">7..扫描一个IP地址范围</span><br><span class="line">nmap 192.168.0.101-110 </span><br><span class="line">8.排除一些远程主机后再扫描</span><br><span class="line">在执行全网扫描或用通配符扫描时你可以使用“-exclude”选项来排除某些你不想要扫描的主机。</span><br><span class="line"></span><br><span class="line"> nmap 192.168.0.* --exclude 192.168.0.100</span><br><span class="line">9.扫描操作系统信息和路由跟踪</span><br><span class="line">使用Nmap，你可以检测远程主机上运行的操作系统和版本。为了启用操作系统和版本检测，脚本扫描和路由跟踪功能，我们可以使用NMAP的“-A“选项。</span><br><span class="line"></span><br><span class="line">nmap -A 192.168.0.101</span><br><span class="line">10.启用Nmap的操作系统探测功能</span><br><span class="line">使用选项“-O”和“-osscan-guess”也帮助探测操作系统信息。</span><br><span class="line"></span><br><span class="line">nmap -O server2.tecmint.com</span><br><span class="line">11.扫描主机侦测防火墙</span><br><span class="line">下面的命令将扫描远程主机以探测该主机是否使用了包过滤器或防火墙。</span><br><span class="line"></span><br><span class="line">nmap -sA 192.168.0.101</span><br><span class="line">12.扫描主机检测是否有防火墙保护</span><br><span class="line">扫描主机检测其是否受到数据包过滤软件或防火墙的保护。</span><br><span class="line"></span><br><span class="line">nmap -PN 192.168.0.101</span><br><span class="line">13.找出网络中的在线主机</span><br><span class="line">使用“-sP”选项，我们可以简单的检测网络中有哪些在线主机，该选项会跳过端口扫描和其他一些检测。</span><br><span class="line"></span><br><span class="line">nmap -sP 192.168.0.*</span><br><span class="line">14.执行快速扫描</span><br><span class="line">你可以使用“-F”选项执行一次快速扫描，仅扫描列在nmap-services文件中的端口而避开所有其它的端口。</span><br><span class="line"></span><br><span class="line">nmap -F 192.168.0.101</span><br><span class="line">15.查看Nmap的版本</span><br><span class="line">nmap -V</span><br><span class="line">顺序扫描端口</span><br><span class="line">使用“-r”选项表示不会随机的选择端口扫描。</span><br><span class="line"></span><br><span class="line">nmap -r 192.168.0.101</span><br><span class="line">17.打印主机接口和路由</span><br><span class="line">你可以使用nmap的“–iflist”选项检测主机接口和路由信息。</span><br><span class="line"></span><br><span class="line">nmap --iflist</span><br><span class="line">18.扫描特定的端口</span><br><span class="line">使用Nmap扫描远程机器的端口有各种选项，你可以使用“-P”选项指定你想要扫描的端口，默认情况下nmap只扫描TCP端口。</span><br><span class="line"></span><br><span class="line">nmap -p 80 server2.tecmint.com</span><br><span class="line">19.扫描TCP端口</span><br><span class="line">你可以指定具体的端口类型和端口号来让nmap扫描。</span><br><span class="line"></span><br><span class="line"> nmap -p T:8888,80 server2.tecmint.com</span><br><span class="line">20.扫描UDP端口</span><br><span class="line">nmap -sU 53 server2.tecmint.com</span><br><span class="line">21.扫描多个端口</span><br><span class="line">你还可以使用选项“-P”来扫描多个端口。</span><br><span class="line"></span><br><span class="line">nmap -p 80,443 192.168.0.101</span><br><span class="line">22.扫描指定范围内的端口</span><br><span class="line">您可以使用表达式来扫描某个范围内的端口。</span><br><span class="line"></span><br><span class="line">nmap -p 80-160 192.168.0.101</span><br><span class="line">23.查找主机服务版本号</span><br><span class="line">nmap -sV 192.168.0.101</span><br><span class="line">24.使用TCP ACK (PA)和TCP Syn (PS)扫描远程主机</span><br><span class="line">有时候包过滤防火墙会阻断标准的ICMP ping请求，在这种情况下，我们可以使用TCP ACK和TCP Syn方法来扫描远程主机。</span><br><span class="line"></span><br><span class="line">nmap -PS 192.168.0.101</span><br><span class="line">25.使用TCP ACK扫描远程主机上特定的端口</span><br><span class="line"> nmap -PA -p 22,80 192.168.0.101</span><br><span class="line">26. 使用TCP Syn扫描远程主机上特定的端口</span><br><span class="line">nmap -PS -p 22,80 192.168.0.101</span><br><span class="line">27.执行一次隐蔽的扫描</span><br><span class="line">nmap -sS 192.168.0.101</span><br><span class="line">28.使用TCP Syn扫描最常用的端口</span><br><span class="line">nmap -sT 192.168.0.101</span><br><span class="line">29.执行TCP空扫描以骗过防火墙</span><br><span class="line">nmap -sN 192.168.0.101</span><br></pre></td></tr></table></figure>
<h4 id="使用Nmap进行操作系统探测"><a href="#使用Nmap进行操作系统探测" class="headerlink" title="使用Nmap进行操作系统探测"></a>使用Nmap进行操作系统探测</h4><p>使用Nmap识别操作系统最简单的方法为使用-O参数</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">root@kali:/home/toor/桌面<span class="comment"># nmap -O ctf.hnp.edu.cn</span></span><br><span class="line">Starting Nmap 7.80 ( https://nmap.org ) at 2020-11-11 20:56 CST</span><br><span class="line">Nmap scan report <span class="keyword">for</span> ctf.hnp.edu.cn (183.169.148.18)</span><br><span class="line">Host is up (0.0011s latency).</span><br><span class="line">Not shown: 997 filtered ports</span><br><span class="line">PORT     STATE SERVICE</span><br><span class="line">22/tcp   open  ssh</span><br><span class="line">80/tcp   open  http</span><br><span class="line">8000/tcp open  http-alt</span><br><span class="line">Warning: OSScan results may be unreliable because we could not find at least 1 open and 1 closed port</span><br><span class="line">Device <span class="built_in">type</span>: specialized|WAP|phone</span><br><span class="line">Running: iPXE 1.X, Linux 2.4.X|2.6.X, Sony Ericsson embedded</span><br><span class="line">OS CPE: cpe:/o:ipxe:ipxe:1.0.0%2b cpe:/o:linux:linux_kernel:2.4.20 cpe:/o:linux:linux_kernel:2.6.22 cpe:/h:sonyericsson:u8i_vivaz</span><br><span class="line">OS details: iPXE 1.0.0+, Tomato 1.28 (Linux 2.4.20), Tomato firmware (Linux 2.6.22), Sony Ericsson U8i Vivaz mobile phone</span><br><span class="line"></span><br><span class="line">OS detection performed. Please report any incorrect results at https://nmap.org/submit/ .</span><br><span class="line">Nmap <span class="keyword">done</span>: 1 IP address (1 host up) scanned <span class="keyword">in</span> 7.63 seconds</span><br></pre></td></tr></table></figure>
<h4 id="使用p0f进行操作系统探测"><a href="#使用p0f进行操作系统探测" class="headerlink" title="使用p0f进行操作系统探测"></a>使用p0f进行操作系统探测</h4><p>p0f是一款被动探测工具，通过分析网络数据包来判断操作系统类型。同时p0f在网络分析方面功能强大，可以用它来分析NAT、负载均衡、应用代理等。下面命令的含义为监听网卡eth0，并开启混杂模式。这样会监听到每一个网络连接，部分结果摘录如下：</p>
<h3 id="站点信息收集"><a href="#站点信息收集" class="headerlink" title="站点信息收集"></a>站点信息收集</h3><p>接下来我们进行web网站站点信息收集，主要收集如下信息：</p>
<p>CMS指纹识别</p>
<p>历史漏洞</p>
<p>脚本语言</p>
<p>敏感目录/文件</p>
<p>Waf识别</p>
<h4 id="CMS指纹识别"><a href="#CMS指纹识别" class="headerlink" title="CMS指纹识别"></a>CMS指纹识别</h4><p>CMS（内容管理系统）又称为整站系统或文章系统，用于网站内容管理。用户只需要下载对应的CMS软件包，就能部署搭建，并直接利用CMS。但是各种CMS都具有其独特的结构命名规则和特定的文件内容，因此可以利用这些内容来获取CMS站点的具体软件CMS与版本。</p>
<p>在渗透测试中，对进行指纹识别是相当有必要的，识别出相应的CMS，才能查找与其相关的漏洞，然后才能进行相应的渗透操作。</p>
<p>常见的CMS有Dedecms(织梦)、Discuz、PHPWEB、PHPWind、PHPCMS、ECShop、Dvbbs、SiteWeaver、ASPCMS、帝国、Z-Blog、WordPress等。</p>
<p>（1）在线识别</p>
<p>如今，网上一些在线的网站查询CMS指纹识别，如下所示：</p>
<p>BugScaner: <a target="_blank" rel="noopener" href="http://whatweb.bugscaner.com/look/">http://whatweb.bugscaner.com/look/</a></p>
<p>潮汐指纹：<a target="_blank" rel="noopener" href="http://finger.tidesec.net/">http://finger.tidesec.net/</a></p>
<p>云悉：<a target="_blank" rel="noopener" href="http://www.yunsee.cn/info.html">http://www.yunsee.cn/info.html</a></p>
<p>WhatWeb: <a target="_blank" rel="noopener" href="https://whatweb.net/">https://whatweb.net/</a></p>
<p>云悉指纹: <a target="_blank" rel="noopener" href="http://www.yunsee.cn/finger.html">http://www.yunsee.cn/finger.html</a></p>
<p>（2）利用工具</p>
<p>常见的CMS指纹识别工具有WhatWeb、WebRobo、椰树、御剑Web指纹识别。大禹CMS识别程序等，可以快速识别一些主流CMS。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">root@kali:/home/toor/桌面<span class="comment"># whatweb www.kingcms.com</span></span><br><span class="line">/usr/lib/ruby/vendor_ruby/target.rb:188: warning: URI.escape is obsolete</span><br><span class="line">/usr/lib/ruby/vendor_ruby/target.rb:188: warning: URI.escape is obsolete</span><br><span class="line">http://www.kingcms.com [301 Moved Permanently] Country[HONG KONG][HK], HTTPServer[nginx], IP[39.108.101.13], RedirectLocation[https://www.kingcms.com/], Title[301 Moved Permanently], nginx  </span><br><span class="line">https://www.kingcms.com/ [200 OK] Country[HONG KONG][HK], HTTPServer[nginx], IP[39.108.101.13], JQuery, PasswordField[userpass], Script[text/javascript], Title[KingCMS内容管理系统 - CMS界的轻骑士], nginx                                                                                 </span><br><span class="line">root@kali:/home/toor/桌面<span class="comment"># whatweb www.abscale.net</span></span><br><span class="line">/usr/lib/ruby/vendor_ruby/target.rb:188: warning: URI.escape is obsolete</span><br><span class="line">/usr/lib/ruby/vendor_ruby/target.rb:188: warning: URI.escape is obsolete</span><br><span class="line">http://www.abscale.net [301 Moved Permanently] Apache, Country[CHINA][CN], HTTPServer[Apache], IP[121.40.240.49], RedirectLocation[https://www.abscale.net], Title[301 Moved Permanently]     </span><br><span class="line">https://www.abscale.net [200 OK] Apache, Cookies[PHPSESSID], Country[CHINA][CN], HTTPServer[Apache], IP[121.40.240.49], JQuery[1.7.1], Script[text/javascript], Title[米粉生产线|面条生产线|米粉自动称重包装|面条自动称重包装-广东安本智能机器有限公司], X-Powered-By[ThinkPHP]</span><br></pre></td></tr></table></figure>



<p>如上图，WhatWeb将目标站点的服务器、中间节、cms等都识别了出来。</p>
<p>当我们得知了一个站点的cms类型后，我们可以在网上查找与其相关的漏洞并进行相应的测试。</p>
<p>（3）手工识别</p>
<ol>
<li>根据HTTP响应头判断，重点关注X-Powered-By、cookie等字段</li>
<li>根据HTML 特征，重点关注 body、title、meta等标签的内容和属性。</li>
<li>根据特殊的class判断。HTML 中存在特定 class 属性的某些 div 标签，如<body class="ke-content"><br>……</body></li>
</ol>
<h4 id="WAF检测"><a href="#WAF检测" class="headerlink" title="WAF检测"></a>WAF检测</h4><p>WafW00f是Python脚本，用于检测网络服务是否处于网络应用防火墙保护状态，极其有用。使用WafW00f检测网络服务器和网络传输之间是否存在网络应用防火墙，这不仅可以发展测试战略，而且还能开发出绕过网络应用防火墙的高级技术。简单用法 wafw00f URL</p>
</div><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">Author: </span><span class="post-copyright-info"><a href="mailto:731560818@qq.com">Lh22</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">Link: </span><span class="post-copyright-info"><a href="http://lhlh22.github.io/2020/11/12/%E6%B8%97%E9%80%8F%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/">http://lhlh22.github.io/2020/11/12/%E6%B8%97%E9%80%8F%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E6%B8%97%E9%80%8F/">渗透</a></div><div class="post_share"><div class="social-share" data-image="https://cdn.jsdelivr.net/gh/glassy-sky-lisong/StaticFile/img/6.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button"><i class="fas fa-qrcode"></i> Donate<div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="/img/wechat.png" target="_blank"><img class="post-qr-code-img" src="/img/wechat.png" alt="wechat"/></a><div class="post-qr-code-desc">wechat</div></li></ul></div></div></div><nav class="pagination-post" id="pagination"><div class="next-post pull-full"><a href="/2020/10/23/PHP%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E6%80%BB%E7%BB%93%EF%BC%88%E4%B8%80%EF%BC%89/"><img class="next-cover" src="/img/page/4.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">Next Post</div><div class="next_info">PHP反序列化总结（一）</div></div></a></div></nav><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> Comment</span></div></div><div class="comment-wrap"><div><div class="vcomment" id="vcomment"></div></div></div></div></article></main><footer id="footer" style="background-image: url(https://cdn.jsdelivr.net/gh/glassy-sky-lisong/StaticFile/img/6.jpg)" data-type="photo"><div id="footer-wrap"><div class="copyright">&copy;2020 By Lh22</div><div class="framework-info"><span>Framework </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>Theme </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">Hi,welcome to my <a href="https://lhlh22.github.io">blog</a>!</div></div></footer></div><section id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="Read Mode"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="Switch Between Traditional Chinese And Simplified Chinese">简</button><button id="darkmode" type="button" title="Switch Between Light And Dark Mode"><i class="fas fa-adjust"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="Setting"><i class="fas fa-cog"></i></button><a id="to_comment" href="#post-comment" title="Scroll To Comments"><i class="fas fa-comments"></i></a><button class="close" id="mobile-toc-button" type="button" title="Table Of Contents"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="Back To Top"><i class="fas fa-arrow-up"></i></button></div></section><div><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><div class="js-pjax"><script>function loadValine () {
  function initValine () {
    window.valine = new Valine({
      el: '#vcomment',
      appId: 'WKraB0rnkwNmyJ4Tl0nidr5B-gzGzoHsz',
      appKey: 'LGhNIkl5gyPTbS7BvGAT5GUw',
      placeholder: '说些什么吧',
      avatar: 'monsterid',
      meta: 'nick,mail,link'.split(','),
      pageSize: '10',
      lang: 'zn-CN/',
      recordIP: false,
      serverURLs: '',
      emojiCDN: '',
      emojiMaps: "",
      enableQQ: true,
      path: window.location.pathname,
    });
    if ('nick,mail') { valine.config.requiredFields= 'nick,mail'.split(',') }
  }

  if (typeof Valine === 'function') initValine() 
  else $.getScript('https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js', initValine)
}

if ('Valine' === 'Valine' || !true) {
  if (true) btf.loadComment(document.querySelector('#vcomment'),loadValine)
  else setTimeout(() => loadValine(), 0)
} else {
  function loadOtherComment () {
    loadValine()
  }
}</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><script src="/js/xkTool.js"></script><script src="/js/my.js"></script><script src="/js/sakura.js"></script><canvas class="fireworks"></canvas><script src="https://cdn.jsdelivr.net/npm/animejs@latest/anime.min.js"></script><script src="/js/third-party/fireworks.js"></script><script defer="defer" id="ribbon_piao" mobile="true" src="/js/third-party/piao.js"></script><script src="/js/third-party/activate-power-mode.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = false;
document.body.addEventListener('input', POWERMODE);
</script><script src="/js/third-party/ClickShowText.js" async="async"></script></div></body></html>